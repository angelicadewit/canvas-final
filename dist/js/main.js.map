{"version":3,"sources":["main.js"],"names":["app","PIXI","Application","view","document","getElementById","width","height","transparent","interactive","app2","manifest","loadAssets","loader","add","load","onAssetsLoaded","resources","console","log","setupFox","ticker","e","update","fox","Sprite","texture","position","x","displacement","baseTexture","wrapMode","WRAP_MODES","REPEAT","filter","filters","RGBSplitFilter","on","stage","addChild","vibrating","rgbFilter","blue","Math","random","y","red","temp","rt","rt2","rtSprite","renderer","render","resize","canvasAspect","screen","screenAspect","window","innerWidth","innerHeight","scale","style","transform","onload","addEventListener"],"mappings":"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","file":"main.js","sourcesContent":["const app = new PIXI.Application({\n    view: document.getElementById(\"pixiCanvas\"),\n    width: 1024,\n    height: 1280,\n    transparent: true\n});\n\napp.interactive = true\n\nconst app2 = new PIXI.Application({\n    view: document.getElementById(\"backgroundCanvas\"),\n    width: 1280,\n    height: 720\n})\n\nlet manifest = [\n    {\n        \"key\": \"fox\",\n        \"url\": \"dist/img/fox.jpg\"\n    },\n    {\n        \"key\": \"winter\",\n        \"url\": \"dist/img/winter.jpg\"\n    },\n    {\n        \"key\": \"displacement\",\n        \"url\": \"dist/img/displacement.png\"\n    }\n\n\n]\n\n\nfunction loadAssets(){\n    app.loader.add(manifest)\n    app.loader.load(onAssetsLoaded)\n}\n\nfunction onAssetsLoaded(loader, resources){\n    console.log(resources)\n\n    setupFox()\n\n    app.ticker.add((e) => update(e))\n}\n\nfunction setupFox(){\n    let fox = new PIXI.Sprite(app.loader.resources.fox.texture)\n    fox.interactive = true;\n\n    fox.position.x = -200\n\n    app.loader.resources.displacement.texture.baseTexture.wrapMode = PIXI.WRAP_MODES.REPEAT\n    \n    let filter = new PIXI.filters.RGBSplitFilter()\n\n    fox.on('mouseover', function(){\n        fox.filters = [filter]\n    });\n    fox.on('mouseout', function(){\n        fox.filters = []\n    });\n    \n    // window.addEventListener(\"mouseover\", function(){\n    //     console.log(`hello`)\n    //     fox.filters = []\n    //     // fox.visible = true\n    // })\n\n    // window.addEventListener(\"mouseout\", function(){\n    //     console.log(`goodbye`)\n        \n    //     // fox.visible = true\n    // })\n    app.stage.addChild(fox)\n}\n\nfunction update(e){\n\n    if (vibrating){\n        rgbFilter.blue.x = (Math.random()* 10) - 5\n        rgbFilter.blue.y = (Math.random()* 10) - 5\n        // rgbFilter.green.x = (Math.random()* 10) - 5\n        // rgbFilter.green.y = (Math.random()* 10) - 5\n        rgbFilter.red.x = (Math.random()* 10) - 5\n        rgbFilter.red.y = (Math.random()* 10) - 5\n    }\n\n    let temp = rt\n    rt = rt2\n    rt2 = temp\n\n    rtSprite.texture = rt\n\n    app2.renderer.render(app2.stage, rt2)\n}\n\n\nfunction update(e){\n\n}\n\nfunction resize(e){\n    let canvasAspect = app2.screen.width / app2.screen.height\n    let screenAspect = window.innerWidth / window.innerHeight\n    let scale = 1\n\n    if (screenAspect > canvasAspect) {\n        //screen is wider than canvas. we need to match the width of the screen\n        scale = window.innerWidth / app2.screen.width\n    } else {\n        //screen is taller than canvas. we need to match the height of the screen\n        scale = window.innerHeight / app2.screen.height\n    }\n\n    app2.view.style.transform = \"scale(\" + scale + \")\"\n}\n\n\n\n\nwindow.onload = function(){\n    window.addEventListener(\"resize\", resize)\n    resize()\n    loadAssets()\n}"]}