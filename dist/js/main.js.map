{"version":3,"sources":["main.js"],"names":["app","PIXI","Application","view","document","getElementById","width","height","transparent","vibrating","app2","manifest","loadAssets","loader","add","load","onAssetsLoaded","resources","console","log","setupFox","ticker","e","update","fox","Sprite","texture","interactive","position","x","displacement","baseTexture","wrapMode","WRAP_MODES","REPEAT","filter","filters","RGBSplitFilter","on","stage","addChild","resize","canvasAspect","screen","screenAspect","window","innerWidth","innerHeight","scale","style","transform","onload","addEventListener"],"mappings":";;AAAA,IAAMA,MAAM,IAAIC,KAAKC,WAAT,CAAqB;AAC7BC,UAAMC,SAASC,cAAT,CAAwB,YAAxB,CADuB;AAE7BC,WAAO,IAFsB;AAG7BC,YAAQ,IAHqB;AAI7BC,iBAAa;AAJgB,CAArB,CAAZ;;AAOA,IAAIC,YAAY,KAAhB;;AAEA,IAAMC,OAAO,IAAIT,KAAKC,WAAT,CAAqB;AAC9BC,UAAMC,SAASC,cAAT,CAAwB,kBAAxB,CADwB;AAE9BC,WAAO,IAFuB;AAG9BC,YAAQ;AAHsB,CAArB,CAAb;;AAMA,IAAII,WAAW,CACX;AACI,WAAO,KADX;AAEI,WAAO;AAFX,CADW,EAKX;AACI,WAAO,QADX;AAEI,WAAO;AAFX,CALW,EASX;AACI,WAAO,cADX;AAEI,WAAO;AAFX,CATW,CAAf;;AAkBA,SAASC,UAAT,GAAqB;AACjBZ,QAAIa,MAAJ,CAAWC,GAAX,CAAeH,QAAf;AACAX,QAAIa,MAAJ,CAAWE,IAAX,CAAgBC,cAAhB;AACH;;AAED,SAASA,cAAT,CAAwBH,MAAxB,EAAgCI,SAAhC,EAA0C;AACtCC,YAAQC,GAAR,CAAYF,SAAZ;;AAEAG;;AAEApB,QAAIqB,MAAJ,CAAWP,GAAX,CAAe,UAACQ,CAAD;AAAA,eAAOC,OAAOD,CAAP,CAAP;AAAA,KAAf;AACH;;AAED,SAASF,QAAT,GAAmB;AACf,QAAII,MAAM,IAAIvB,KAAKwB,MAAT,CAAgBzB,IAAIa,MAAJ,CAAWI,SAAX,CAAqBO,GAArB,CAAyBE,OAAzC,CAAV;AACAF,QAAIG,WAAJ,GAAkB,IAAlB;;AAEAH,QAAII,QAAJ,CAAaC,CAAb,GAAiB,CAAC,GAAlB;;AAEA7B,QAAIa,MAAJ,CAAWI,SAAX,CAAqBa,YAArB,CAAkCJ,OAAlC,CAA0CK,WAA1C,CAAsDC,QAAtD,GAAiE/B,KAAKgC,UAAL,CAAgBC,MAAjF;;AAEA,QAAIC,SAAS,IAAIlC,KAAKmC,OAAL,CAAaC,cAAjB,EAAb;;AAEAb,QAAIc,EAAJ,CAAO,WAAP,EAAoB,YAAU;AAC1B7B,oBAAY,IAAZ;AACAe,YAAIY,OAAJ,GAAc,CAACD,MAAD,CAAd;AACH,KAHD;AAIAX,QAAIc,EAAJ,CAAO,UAAP,EAAmB,YAAU;AACzB7B,oBAAY,KAAZ;AACAe,YAAIY,OAAJ,GAAc,EAAd;AACH,KAHD;;AAKApC,QAAIuC,KAAJ,CAAUC,QAAV,CAAmBhB,GAAnB;AACH;;AAGD,SAASD,MAAT,CAAgBD,CAAhB,EAAkB,CAEjB;;AAED,SAASmB,MAAT,CAAgBnB,CAAhB,EAAkB;AACd,QAAIoB,eAAehC,KAAKiC,MAAL,CAAYrC,KAAZ,GAAoBI,KAAKiC,MAAL,CAAYpC,MAAnD;AACA,QAAIqC,eAAeC,OAAOC,UAAP,GAAoBD,OAAOE,WAA9C;AACA,QAAIC,QAAQ,CAAZ;;AAEA,QAAIJ,eAAeF,YAAnB,EAAiC;AAC7B;AACAM,gBAAQH,OAAOC,UAAP,GAAoBpC,KAAKiC,MAAL,CAAYrC,KAAxC;AACH,KAHD,MAGO;AACH;AACA0C,gBAAQH,OAAOE,WAAP,GAAqBrC,KAAKiC,MAAL,CAAYpC,MAAzC;AACH;;AAEDG,SAAKP,IAAL,CAAU8C,KAAV,CAAgBC,SAAhB,GAA4B,WAAWF,KAAX,GAAmB,GAA/C;AACH;;AAKDH,OAAOM,MAAP,GAAgB,YAAU;AACtBN,WAAOO,gBAAP,CAAwB,QAAxB,EAAkCX,MAAlC;AACAA;AACA7B;AACH,CAJD","file":"main.js","sourcesContent":["const app = new PIXI.Application({\n    view: document.getElementById(\"pixiCanvas\"),\n    width: 1024,\n    height: 1280,\n    transparent: true\n});\n\nlet vibrating = false\n\nconst app2 = new PIXI.Application({\n    view: document.getElementById(\"backgroundCanvas\"),\n    width: 1280,\n    height: 720\n})\n\nlet manifest = [\n    {\n        \"key\": \"fox\",\n        \"url\": \"dist/img/fox.jpg\"\n    },\n    {\n        \"key\": \"winter\",\n        \"url\": \"dist/img/winter.jpg\"\n    },\n    {\n        \"key\": \"displacement\",\n        \"url\": \"dist/img/displacement.png\"\n    }\n\n\n]\n\n\nfunction loadAssets(){\n    app.loader.add(manifest)\n    app.loader.load(onAssetsLoaded)\n}\n\nfunction onAssetsLoaded(loader, resources){\n    console.log(resources)\n\n    setupFox()\n\n    app.ticker.add((e) => update(e))\n}\n\nfunction setupFox(){\n    let fox = new PIXI.Sprite(app.loader.resources.fox.texture)\n    fox.interactive = true;\n\n    fox.position.x = -200\n\n    app.loader.resources.displacement.texture.baseTexture.wrapMode = PIXI.WRAP_MODES.REPEAT\n    \n    let filter = new PIXI.filters.RGBSplitFilter()\n\n    fox.on('mouseover', function(){\n        vibrating = true\n        fox.filters = [filter]\n    });\n    fox.on('mouseout', function(){\n        vibrating = false\n        fox.filters = []\n    });\n\n    app.stage.addChild(fox)\n}\n\n\nfunction update(e){\n\n}\n\nfunction resize(e){\n    let canvasAspect = app2.screen.width / app2.screen.height\n    let screenAspect = window.innerWidth / window.innerHeight\n    let scale = 1\n\n    if (screenAspect > canvasAspect) {\n        //screen is wider than canvas. we need to match the width of the screen\n        scale = window.innerWidth / app2.screen.width\n    } else {\n        //screen is taller than canvas. we need to match the height of the screen\n        scale = window.innerHeight / app2.screen.height\n    }\n\n    app2.view.style.transform = \"scale(\" + scale + \")\"\n}\n\n\n\n\nwindow.onload = function(){\n    window.addEventListener(\"resize\", resize)\n    resize()\n    loadAssets()\n}"]}